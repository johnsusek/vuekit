import AppKit
import JavaScriptCore

let subclassed = [
  "AVPlayerView",
  "IKCameraDeviceView",
  "IKDeviceBrowserView",
  "IKFilterBrowserView",
  "IKFilterUIView",
  "IKImageView",
  "IKScannerDeviceView",
  "NSBox",
  "NSBrowser",
  "NSButton",
  "NSClipView",
  "NSCollectionView",
  "NSColorWell",
  "NSComboBox",
  "NSDatePicker",
  "NSGridView",
  "NSImageView",
  "NSLevelIndicator",
  "NSMatrix",
  "NSOutlineView",
  "NSPathControl",
  "NSPopUpButton",
  "NSPredicateEditor",
  "NSProgressIndicator",
  "NSRuleEditor",
  "NSRulerView",
  "NSScroller",
  "NSScrollView",
  "NSScrubber",
  "NSScrubberArrangedView",
  "NSScrubberImageItemView",
  "NSScrubberTextItemView",
  "NSSearchField",
  "NSSecureTextField",
  "NSSegmentedControl",
  "NSSlider",
  "NSSplitView",
  "NSStackView",
  "NSStatusBarButton",
  "NSStepper",
  "NSSwitch",
  "NSTableCellView",
  "NSTableHeaderView",
  "NSTableRowView",
  "NSTableView",
  "NSTabView",
  "NSText",
  "NSTextField",
  "NSTextView",
  "NSTokenField",
  "NSVisualEffectView",
  "QLPreviewView",
  "QuartzFilterView"
]

let allClasses = [
  "AVAsset",
  "AVAssetCache",
  "AVAssetExportSession",
  "AVAssetImageGenerator",
  "AVAssetReader",
  "AVAssetReaderAudioMixOutput",
  "AVAssetReaderOutput",
  "AVAssetReaderOutputMetadataAdaptor",
  "AVAssetReaderSampleReferenceOutput",
  "AVAssetReaderTrackOutput",
  "AVAssetReaderVideoCompositionOutput",
  "AVAssetResourceLoader",
  "AVAssetResourceLoadingContentInformationRequest",
  "AVAssetResourceLoadingDataRequest",
  "AVAssetResourceLoadingRequest",
  "AVAssetResourceLoadingRequestor",
  "AVAssetResourceRenewalRequest",
  "AVAssetTrack",
  "AVAssetTrackGroup",
  "AVAssetTrackSegment",
  "AVAssetWriter",
  "AVAssetWriterInput",
  "AVAssetWriterInputGroup",
  "AVAssetWriterInputMetadataAdaptor",
  "AVAssetWriterInputPassDescription",
  "AVAssetWriterInputPixelBufferAdaptor",
  "AVAsynchronousCIImageFilteringRequest",
  "AVAsynchronousVideoCompositionRequest",
  "AVAudioBuffer",
  "AVAudioChannelLayout",
  "AVAudioCompressedBuffer",
  "AVAudioConnectionPoint",
  "AVAudioConverter",
  "AVAudioEngine",
  "AVAudioEnvironmentDistanceAttenuationParameters",
  "AVAudioEnvironmentNode",
  "AVAudioEnvironmentReverbParameters",
  "AVAudioFile",
  "AVAudioFormat",
  "AVAudioInputNode",
  "AVAudioIONode",
  "AVAudioMix",
  "AVAudioMixerNode",
  "AVAudioMixingDestination",
  "AVAudioMixInputParameters",
  "AVAudioNode",
  "AVAudioOutputNode",
  "AVAudioPCMBuffer",
  "AVAudioPlayer",
  "AVAudioPlayerNode",
  "AVAudioRecorder",
  "AVAudioSequencer",
  "AVAudioSinkNode",
  "AVAudioSourceNode",
  "AVAudioTime",
  "AVAudioUnit",
  "AVAudioUnitComponent",
  "AVAudioUnitComponentManager",
  "AVAudioUnitDelay",
  "AVAudioUnitDistortion",
  "AVAudioUnitEffect",
  "AVAudioUnitEQ",
  "AVAudioUnitEQFilterParameters",
  "AVAudioUnitGenerator",
  "AVAudioUnitMIDIInstrument",
  "AVAudioUnitReverb",
  "AVAudioUnitSampler",
  "AVAudioUnitTimeEffect",
  "AVAudioUnitTimePitch",
  "AVAudioUnitVarispeed",
  "AVCameraCalibrationData",
  "AVCaptureAudioChannel",
  "AVCaptureAudioDataOutput",
  "AVCaptureAudioFileOutput",
  "AVCaptureAudioPreviewOutput",
  "AVCaptureConnection",
  "AVCaptureDevice",
  "AVCaptureDeviceDiscoverySession",
  "AVCaptureDeviceFormat",
  "AVCaptureDeviceInput",
  "AVCaptureDeviceInputSource",
  "AVCaptureFileOutput",
  "AVCaptureInput",
  "AVCaptureInputPort",
  "AVCaptureMovieFileOutput",
  "AVCaptureOutput",
  "AVCapturePhoto",
  "AVCapturePhotoOutput",
  "AVCapturePhotoSettings",
  "AVCaptureResolvedPhotoSettings",
  "AVCaptureScreenInput",
  "AVCaptureSession",
  "AVCaptureVideoDataOutput",
  "AVCaptureVideoPreviewLayer",
  "AVComposition",
  "AVCompositionTrack",
  "AVCompositionTrackFormatDescriptionReplacement",
  "AVCompositionTrackSegment",
  "AVContentKeyRequest",
  "AVContentKeyResponse",
  "AVContentKeySession",
  "AVDateRangeMetadataGroup",
  "AVDepthData",
  "AVFragmentedAsset",
  "AVFragmentedAssetMinder",
  "AVFragmentedAssetTrack",
  "AVFragmentedMovie",
  "AVFragmentedMovieMinder",
  "AVFragmentedMovieTrack",
  "AVFrameRateRange",
  "AVMediaDataStorage",
  "AVMediaSelection",
  "AVMediaSelectionGroup",
  "AVMediaSelectionOption",
  "AVMetadataBodyObject",
  "AVMetadataCatBodyObject",
  "AVMetadataDogBodyObject",
  "AVMetadataFaceObject",
  "AVMetadataGroup",
  "AVMetadataHumanBodyObject",
  "AVMetadataItem",
  "AVMetadataItemFilter",
  "AVMetadataItemValueRequest",
  "AVMetadataMachineReadableCodeObject",
  "AVMetadataObject",
  "AVMetadataSalientObject",
  "AVMIDIPlayer",
  "AVMovie",
  "AVMovieTrack",
  "AVMusicTrack",
  "AVMutableAudioMix",
  "AVMutableAudioMixInputParameters",
  "AVMutableComposition",
  "AVMutableCompositionTrack",
  "AVMutableDateRangeMetadataGroup",
  "AVMutableMediaSelection",
  "AVMutableMetadataItem",
  "AVMutableMovie",
  "AVMutableMovieTrack",
  "AVMutableTimedMetadataGroup",
  "AVMutableVideoComposition",
  "AVMutableVideoCompositionInstruction",
  "AVMutableVideoCompositionLayerInstruction",
  "AVOutputSettingsAssistant",
  "AVPersistableContentKeyRequest",
  "AVPlayer",
  "AVPlayerItem",
  "AVPlayerItemAccessLog",
  "AVPlayerItemAccessLogEvent",
  "AVPlayerItemErrorLog",
  "AVPlayerItemErrorLogEvent",
  "AVPlayerItemLegibleOutput",
  "AVPlayerItemMediaDataCollector",
  "AVPlayerItemMetadataCollector",
  "AVPlayerItemMetadataOutput",
  "AVPlayerItemOutput",
  "AVPlayerItemTrack",
  "AVPlayerItemVideoOutput",
  "AVPlayerLayer",
  "AVPlayerLooper",
  "AVPlayerMediaSelectionCriteria",
  "AVPlayerView",
  "AVPortraitEffectsMatte",
  "AVQueuePlayer",
  "AVRouteDetector",
  "AVSampleBufferAudioRenderer",
  "AVSampleBufferDisplayLayer",
  "AVSampleBufferGenerator",
  "AVSampleBufferRenderSynchronizer",
  "AVSampleBufferRequest",
  "AVSampleCursor",
  "AVSemanticSegmentationMatte",
  "AVSpeechSynthesisVoice",
  "AVSpeechSynthesizer",
  "AVSpeechUtterance",
  "AVSynchronizedLayer",
  "AVTextStyleRule",
  "AVTimedMetadataGroup",
  "AVURLAsset",
  "AVVideoComposition",
  "AVVideoCompositionCoreAnimationTool",
  "AVVideoCompositionInstruction",
  "AVVideoCompositionLayerInstruction",
  "AVVideoCompositionRenderContext",
  "AVVideoCompositionRenderHint",
  "CAAnimation",
  "CAAnimationGroup",
  "CABasicAnimation",
  "CAConstraint",
  "CAConstraintLayoutManager",
  "CAEDRMetadata",
  "CAEmitterCell",
  "CAEmitterLayer",
  "CAGradientLayer",
  "CAKeyframeAnimation",
  "CALayer",
  "CAMediaTimingFunction",
  "CAMetalLayer",
  "CAPropertyAnimation",
  "CARemoteLayerClient",
  "CARemoteLayerServer",
  "CARenderer",
  "CAReplicatorLayer",
  "CAScrollLayer",
  "CAShapeLayer",
  "CASpringAnimation",
  "CATextLayer",
  "CATiledLayer",
  "CATransaction",
  "CATransformLayer",
  "CATransition",
  "CAValueFunction",
  "IKCameraDeviceView",
  "IKDeviceBrowserView",
  "IKFilterBrowserPanel",
  "IKFilterBrowserView",
  "IKFilterUIView",
  "IKImageBrowserCell",
  "IKImageEditPanel",
  "IKImageView",
  "IKPictureTaker",
  "IKSaveOptions",
  "IKScannerDeviceView",
  "IKSlideshow",
  "NSAccessibilityCustomAction",
  "NSAccessibilityCustomRotor",
  "NSAccessibilityCustomRotorItemResult",
  "NSAccessibilityCustomRotorSearchParameters",
  "NSAccessibilityElement",
  "NSAffineTransform",
  "NSAlert",
  "NSAlignmentFeedbackFilter",
  "NSAnimation",
  "NSAnimationContext",
  "NSAppearance",
  "NSAppleEventDescriptor",
  "NSAppleEventManager",
  "NSAppleScript",
  "NSApplication",
  "NSArray",
  "NSArrayController",
  "NSAssertionHandler",
  "NSATSTypesetter",
  "NSAttributedString",
  "NSAutoreleasePool",
  "NSBackgroundActivityScheduler",
  "NSBezierPath",
  "NSBindingSelectionMarker",
  "NSBitmapImageRep",
  "NSBlockOperation",
  "NSBox",
  "NSBrowser",
  "NSBrowserCell",
  "NSBundle",
  "NSButton",
  "NSButtonCell",
  "NSButtonTouchBarItem",
  "NSByteCountFormatter",
  "NSCache",
  "NSCachedURLResponse",
  "NSCalendar",
  "NSCandidateListTouchBarItem",
  "NSCell",
  "NSCharacterSet",
  "NSCIImageRep",
  "NSClassDescription",
  "NSClickGestureRecognizer",
  "NSClipView",
  "NSCloneCommand",
  "NSCloseCommand",
  "NSCoder",
  "NSCollectionLayoutAnchor",
  "NSCollectionLayoutBoundarySupplementaryItem",
  "NSCollectionLayoutDecorationItem",
  "NSCollectionLayoutDimension",
  "NSCollectionLayoutEdgeSpacing",
  "NSCollectionLayoutGroup",
  "NSCollectionLayoutGroupCustomItem",
  "NSCollectionLayoutItem",
  "NSCollectionLayoutSection",
  "NSCollectionLayoutSize",
  "NSCollectionLayoutSpacing",
  "NSCollectionLayoutSupplementaryItem",
  "NSCollectionView",
  "NSCollectionViewCompositionalLayout",
  "NSCollectionViewCompositionalLayoutConfiguration",
  "NSCollectionViewDiffableDataSource",
  "NSCollectionViewFlowLayout",
  "NSCollectionViewFlowLayoutInvalidationContext",
  "NSCollectionViewGridLayout",
  "NSCollectionViewItem",
  "NSCollectionViewLayout",
  "NSCollectionViewLayoutAttributes",
  "NSCollectionViewLayoutInvalidationContext",
  "NSCollectionViewTransitionLayout",
  "NSCollectionViewUpdateItem",
  "NSColor",
  "NSColorList",
  "NSColorPanel",
  "NSColorPicker",
  "NSColorPickerTouchBarItem",
  "NSColorSampler",
  "NSColorSpace",
  "NSColorWell",
  "NSComboBox",
  "NSComboBoxCell",
  "NSComparisonPredicate",
  "NSCompoundPredicate",
  "NSCondition",
  "NSConditionLock",
  "NSControl",
  "NSController",
  "NSCountedSet",
  "NSCreateCommand",
  "NSCursor",
  "NSCustomImageRep",
  "NSCustomTouchBarItem",
  "NSData",
  "NSDataAsset",
  "NSDataDetector",
  "NSDate",
  "NSDateComponents",
  "NSDateComponentsFormatter",
  "NSDateFormatter",
  "NSDateInterval",
  "NSDateIntervalFormatter",
  "NSDatePicker",
  "NSDatePickerCell",
  "NSDecimalNumber",
  "NSDecimalNumberHandler",
  "NSDeleteCommand",
  "NSDictionary",
  "NSDictionaryController",
  "NSDictionaryControllerKeyValuePair",
  "NSDiffableDataSourceSnapshot",
  "NSDimension",
  "NSDirectoryEnumerator",
  "NSDistributedLock",
  "NSDistributedNotificationCenter",
  "NSDockTile",
  "NSDocument",
  "NSDocumentController",
  "NSDraggingImageComponent",
  "NSDraggingItem",
  "NSDraggingSession",
  "NSEnergyFormatter",
  "NSEnumerator",
  "NSEPSImageRep",
  "NSError",
  "NSEvent",
  "NSException",
  "NSExpression",
  "NSExtensionContext",
  "NSExtensionItem",
  "NSFileAccessIntent",
  "NSFileCoordinator",
  "NSFileHandle",
  "NSFileManager",
  "NSFilePromiseProvider",
  "NSFilePromiseReceiver",
  "NSFileProviderService",
  "NSFileVersion",
  "NSFileWrapper",
  "NSFont",
  "NSFontAssetRequest",
  "NSFontCollection",
  "NSFontDescriptor",
  "NSFontManager",
  "NSFontPanel",
  "NSFormatter",
  "NSFormCell",
  "NSGestureRecognizer",
  "NSGlyphGenerator",
  "NSGlyphInfo",
  "NSGradient",
  "NSGraphicsContext",
  "NSGridCell",
  "NSGridColumn",
  "NSGridRow",
  "NSGridView",
  "NSGroupTouchBarItem",
  "NSHapticFeedbackManager",
  "NSHashTable",
  "NSHelpManager",
  "NSHost",
  "NSHTTPCookie",
  "NSHTTPCookieStorage",
  "NSHTTPURLResponse",
  "NSImage",
  "NSImageCell",
  "NSImageRep",
  "NSImageView",
  "NSIndexPath",
  "NSIndexSet",
  "NSIndexSpecifier",
  "NSInputStream",
  "NSISO8601DateFormatter",
  "NSItemProvider",
  "NSJSONSerialization",
  "NSKeyedArchiver",
  "NSKeyedUnarchiver",
  "NSLayoutAnchor",
  "NSLayoutConstraint",
  "NSLayoutDimension",
  "NSLayoutGuide",
  "NSLayoutManager",
  "NSLayoutXAxisAnchor",
  "NSLayoutYAxisAnchor",
  "NSLengthFormatter",
  "NSLevelIndicator",
  "NSLevelIndicatorCell",
  "NSLinguisticTagger",
  "NSListFormatter",
  "NSLocale",
  "NSLock",
  "NSLogicalTest",
  "NSMachPort",
  "NSMagnificationGestureRecognizer",
  "NSMapTable",
  "NSMassFormatter",
  "NSMatrix",
  "NSMeasurement",
  "NSMeasurementFormatter",
  "NSMediaLibraryBrowserController",
  "NSMenu",
  "NSMenuItem",
  "NSMenuItemCell",
  "NSMenuToolbarItem",
  "NSMetadataItem",
  "NSMetadataQuery",
  "NSMetadataQueryAttributeValueTuple",
  "NSMetadataQueryResultGroup",
  "NSMoveCommand",
  "NSMutableArray",
  "NSMutableAttributedString",
  "NSMutableCharacterSet",
  "NSMutableData",
  "NSMutableDictionary",
  "NSMutableFontCollection",
  "NSMutableIndexSet",
  "NSMutableOrderedSet",
  "NSMutableParagraphStyle",
  "NSMutableSet",
  "NSMutableString",
  "NSMutableURLRequest",
  "NSNameSpecifier",
  "NSNetService",
  "NSNetServiceBrowser",
  "NSNib",
  "NSNotification",
  "NSNotificationCenter",
  "NSNotificationQueue",
  "NSNull",
  "NSNumber",
  "NSNumberFormatter",
  // "NSObject",
  "NSObjectController",
  "NSOpenPanel",
  "NSOperation",
  "NSOperationQueue",
  "NSOrderedCollectionChange",
  "NSOrderedCollectionDifference",
  "NSOrderedSet",
  "NSOrthography",
  "NSOutlineView",
  "NSOutputStream",
  "NSPageController",
  "NSPageLayout",
  "NSPanel",
  "NSPanGestureRecognizer",
  "NSParagraphStyle",
  "NSPasteboard",
  "NSPasteboardItem",
  "NSPathCell",
  "NSPathComponentCell",
  "NSPathControl",
  "NSPathControlItem",
  "NSPDFImageRep",
  "NSPDFInfo",
  "NSPDFPanel",
  "NSPersistentDocument",
  "NSPersonNameComponents",
  "NSPersonNameComponentsFormatter",
  "NSPickerTouchBarItem",
  "NSPICTImageRep",
  "NSPipe",
  "NSPointerArray",
  "NSPointerFunctions",
  "NSPopover",
  "NSPopoverTouchBarItem",
  "NSPopUpButton",
  "NSPopUpButtonCell",
  "NSPort",
  "NSPortMessage",
  "NSPositionalSpecifier",
  "NSPredicate",
  "NSPredicateEditor",
  "NSPredicateEditorRowTemplate",
  "NSPressGestureRecognizer",
  "NSPressureConfiguration",
  "NSPrinter",
  "NSPrintInfo",
  "NSPrintOperation",
  "NSPrintPanel",
  "NSProcessInfo",
  "NSProgress",
  "NSProgressIndicator",
  "NSPropertyListSerialization",
  "NSProtocolChecker",
  "NSProxy",
  "NSPurgeableData",
  "NSQuitCommand",
  "NSRangeSpecifier",
  "NSRecursiveLock",
  "NSRegularExpression",
  "NSRelativeDateTimeFormatter",
  "NSRelativeSpecifier",
  "NSResponder",
  "NSRotationGestureRecognizer",
  "NSRuleEditor",
  "NSRulerMarker",
  "NSRulerView",
  "NSRunLoop",
  "NSRunningApplication",
  "NSSavePanel",
  "NSScanner",
  "NSScreen",
  "NSScriptClassDescription",
  "NSScriptCoercionHandler",
  "NSScriptCommand",
  "NSScriptCommandDescription",
  "NSScriptExecutionContext",
  "NSScriptObjectSpecifier",
  "NSScriptSuiteRegistry",
  "NSScriptWhoseTest",
  "NSScroller",
  "NSScrollView",
  "NSScrubber",
  "NSScrubberArrangedView",
  "NSScrubberFlowLayout",
  "NSScrubberImageItemView",
  "NSScrubberLayout",
  "NSScrubberLayoutAttributes",
  "NSScrubberProportionalLayout",
  "NSScrubberSelectionStyle",
  "NSScrubberTextItemView",
  "NSSearchField",
  "NSSearchFieldCell",
  "NSSecureTextField",
  "NSSecureTextFieldCell",
  "NSSecureUnarchiveFromDataTransformer",
  "NSSegmentedCell",
  "NSSegmentedControl",
  "NSSet",
  "NSSetCommand",
  "NSShadow",
  "NSSharingService",
  "NSSharingServicePicker",
  "NSSharingServicePickerToolbarItem",
  "NSSharingServicePickerTouchBarItem",
  "NSSlider",
  "NSSliderAccessory",
  "NSSliderAccessoryBehavior",
  "NSSliderCell",
  "NSSliderTouchBarItem",
  "NSSocketPort",
  "NSSortDescriptor",
  "NSSound",
  "NSSpecifierTest",
  "NSSpeechRecognizer",
  "NSSpeechSynthesizer",
  "NSSpellChecker",
  "NSSpellServer",
  "NSSplitView",
  "NSSplitViewController",
  "NSSplitViewItem",
  "NSStackView",
  "NSStatusBar",
  "NSStatusBarButton",
  "NSStatusItem",
  "NSStepper",
  "NSStepperCell",
  "NSStepperTouchBarItem",
  "NSStoryboard",
  "NSStoryboardSegue",
  "NSStream",
  "NSString",
  "NSStringDrawingContext",
  "NSSwitch",
  "NSTableCellView",
  "NSTableColumn",
  "NSTableHeaderCell",
  "NSTableHeaderView",
  "NSTableRowView",
  "NSTableView",
  "NSTableViewRowAction",
  "NSTabView",
  "NSTabViewController",
  "NSTabViewItem",
  "NSTask",
  "NSText",
  "NSTextAlternatives",
  "NSTextAttachment",
  "NSTextBlock",
  "NSTextCheckingController",
  "NSTextCheckingResult",
  "NSTextContainer",
  "NSTextField",
  "NSTextFieldCell",
  "NSTextFinder",
  "NSTextInputContext",
  "NSTextList",
  "NSTextStorage",
  "NSTextTab",
  "NSTextTable",
  "NSTextTableBlock",
  "NSTextView",
  "NSThread",
  "NSTimer",
  "NSTimeZone",
  "NSTitlebarAccessoryViewController",
  "NSTokenField",
  "NSTokenFieldCell",
  "NSToolbar",
  "NSToolbarItem",
  "NSToolbarItemGroup",
  "NSTouch",
  "NSTouchBar",
  "NSTouchBarItem",
  "NSTrackingArea",
  "NSTreeController",
  "NSTreeNode",
  "NSTypesetter",
  "NSUbiquitousKeyValueStore",
  "NSUndoManager",
  "NSUniqueIDSpecifier",
  "NSUnit",
  "NSUnitAcceleration",
  "NSUnitAngle",
  "NSUnitArea",
  "NSUnitConcentrationMass",
  "NSUnitConverter",
  "NSUnitConverterLinear",
  "NSUnitDispersion",
  "NSUnitDuration",
  "NSUnitElectricCharge",
  "NSUnitElectricCurrent",
  "NSUnitElectricPotentialDifference",
  "NSUnitElectricResistance",
  "NSUnitEnergy",
  "NSUnitFrequency",
  "NSUnitFuelEfficiency",
  "NSUnitIlluminance",
  "NSUnitInformationStorage",
  "NSUnitLength",
  "NSUnitMass",
  "NSUnitPower",
  "NSUnitPressure",
  "NSUnitSpeed",
  "NSUnitTemperature",
  "NSUnitVolume",
  "NSURL",
  "NSURLAuthenticationChallenge",
  "NSURLCache",
  "NSURLComponents",
  "NSURLConnection",
  "NSURLCredential",
  "NSURLCredentialStorage",
  "NSURLDownload",
  "NSURLProtectionSpace",
  "NSURLProtocol",
  "NSURLQueryItem",
  "NSURLRequest",
  "NSURLResponse",
  "NSURLSession",
  "NSURLSessionConfiguration",
  "NSURLSessionDownloadTask",
  "NSURLSessionStreamTask",
  "NSURLSessionTask",
  "NSURLSessionTaskMetrics",
  "NSURLSessionTaskTransactionMetrics",
  "NSURLSessionWebSocketMessage",
  "NSURLSessionWebSocketTask",
  "NSUserActivity",
  "NSUserAppleScriptTask",
  "NSUserAutomatorTask",
  "NSUserDefaults",
  "NSUserDefaultsController",
  "NSUserInterfaceCompressionOptions",
  "NSUserNotification",
  "NSUserNotificationAction",
  "NSUserNotificationCenter",
  "NSUserScriptTask",
  "NSUserUnixTask",
  "NSUUID",
  "NSValue",
  "NSValueTransformer",
  "NSView",
  "NSViewAnimation",
  "NSViewController",
  "NSVisualEffectView",
  "NSWhoseSpecifier",
  "NSWindow",
  "NSWindowController",
  "NSWindowTab",
  "NSWindowTabGroup",
  "NSWorkspace",
  "NSWorkspaceOpenConfiguration",
  "NSXMLDocument",
  "NSXMLDTD",
  "NSXMLDTDNode",
  "NSXMLElement",
  "NSXMLNode",
  "NSXMLParser",
  "NSXPCCoder",
  "NSXPCConnection",
  "NSXPCInterface",
  "NSXPCListener",
  "QLPreviewPanel",
  "QLPreviewView",
  "QuartzFilter",
  "QuartzFilterManager",
  "QuartzFilterView"
]

class VueKitRegistration {
  let context: JSContext

  init(context: JSContext) {
    self.context = context
  }

  func classOrProtoFromString(_ name: String) -> Any? {
    let cls: AnyClass? = NSClassFromString(name)

    if cls != nil { return cls }

    let pro = NSProtocolFromString(name)

    if pro != nil { return pro }

//    print("! Could not load class nor protocol with name: \(name)")

    return nil
  }

  func registerClassOrProto(classOrProto: Any, bridgedName: String) {
    var out = "âœ” Registered \(classOrProto) as "

    out += bridgedName

    context.setObject(
      classOrProto,
      forKeyedSubscript: bridgedName as (NSCopying & NSObjectProtocol)?)

    print(out)
  }

  func registerClasses() {
    let fm = FileManager.default
    let path = Bundle.main.resourcePath!

    for className in allClasses {
      let classType = classOrProtoFromString(className)
      // We subclass views so that we can override draw() etc
      if subclassed.contains(className) {
        let subclassName = String(className.dropFirst(2))
        let subClassType = classOrProtoFromString("VueKit." + subclassName)
        if (subClassType != nil) {
          registerClassOrProto(classOrProto: subClassType!, bridgedName: subclassName)
        }
        else {
          print("Could not register \(subclassName) because subClassType nil")
        }
      }

      if (classType != nil) {
        registerClassOrProto(classOrProto: classType!, bridgedName: className)
      }
      else {
        print("Could not register \(className) because classType nil")
      }
    }

    // TODO: build this list automatically + use subclasses like SegmentedControl below
    let tenderClasses = [
      // This is a HostElement/HostNode in Vue parlance
      //
      // One of these is created for every vue vnode
      // (but this is not a vnode, this is vnode.el)
      // and is akin to an HTML element in the Vue DOM renderer
      //
      // A VueKitNode has a 1:1 correspondence to an NSView, but
      // doesn't always contain an NSView (e.g. for comment/text nodes)
      "VueKitNode": VueKitNode.self,
    ]

    for (bridgedName, className) in tenderClasses {
      registerClassOrProto(classOrProto: className, bridgedName: bridgedName)
    }

    do {
      let frameworks = try fm.contentsOfDirectory(atPath: path + "/swift")

      for framework in frameworks {
        if framework.hasSuffix(".swift") { continue }

        let jsExportFilenames = try fm.contentsOfDirectory(atPath: path + "/swift/" + framework)

        for jsExportFilename in jsExportFilenames {
          let nameParts = jsExportFilename.split(separator: "+")
          let className = "\(nameParts[0])"

          registerClassOrProto(classOrProto: classOrProtoFromString(className).self as Any, bridgedName: className)
        }
      }
    } catch {
      print("! Failed to read directory \(path)")
    }
  }

}
